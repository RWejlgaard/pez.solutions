<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="/css/base.css">
    <title>Pez Solutions</title>
</head>

<body class="base">
    <div class="container">
        <div class="sidemenu">
            <a href="/" style="color: violet">Home</a>
            <a href="/rca">Back to RCA</a>
        </div>

        <div class="content">
            <h1>2024-04-15 - ZFS Pool Suspended</h1>

            <h2>What went wrong?</h2>
            <p>The ZFS pool was suspended due to a loose connection.</p>
            <p>After the pool was taken offline the transmission service crashed due to failing to write to the <code>/hdd</code> mountpoint.</p>

            <h2>Timeline</h2>
            <table class="table-outline">
                <tr>
                    <th>Time</th>
                    <th>Event</th>
                </tr>
                <tr>
                    <td>05:01 BST</td>
                    <td>Pool suspended</td>
                </tr>
                <tr>
                    <td>05:06 BST</td>
                    <td>Page recieved after transmission service crashed due to I/O issues</td>
                </tr>
                <tr>
                    <td>05:07 BST</td>
                    <td>2 disks in "FAULTED" state</td>
                </tr>
                <tr>
                    <td>05:10 BST</td>
                    <td>London-B restarted manually</td>
                </tr>
                <tr>
                    <td>05:13 BST</td>
                    <td>3 disks in "FAULTED" state</td>
                </tr>
                <tr>
                    <td>05:15 BST</td>
                    <td>Firm push on drive bays to reseat failing drives</td>
                </tr>
                <tr>
                    <td>05:16 BST</td>
                    <td>ZFS pool errors cleared using CLI</td>
                </tr>
                <tr>
                    <td>05:17 BST</td>
                    <td>Pool listed as healthy. Subsequent scrub was initialized</td>
                </tr>
                <tr>
                    <td>05:30 BST</td>
                    <td>4 disks in "FAULTED" state</td>
                </tr>
                <tr>
                    <td>09:21 BST</td>
                    <td>London-B taken out of rack, cables unplugged and reseated all drives</td>
                </tr>
                <tr>
                    <td>09:30 BST</td>
                    <td>London-B plugged back in</td>
                </tr>
                <tr>
                    <td>09:32 BST</td>
                    <td>VDev 0 reporting checksum errors. Rapidly increasing.</td>
                </tr>
                <tr>
                    <td>09:45 BST</td>
                    <td>Swapped locations of drive bay of VDev 1 with VDev 0. London-B restarted</td>
                </tr>
                <tr>
                    <td>09:50 BST</td>
                    <td>Pool healthy</td>
                </tr>
                <tr>
                    <td>09:55 BST</td>
                    <td>ZFS scrub intialized to correct any corrupted data</td>
                </tr>
                </table>


            <h2>Resolution</h2>
            <p>After reseating the drives and swapping the locations of the drive bays, the pool was healthy and a scrub was initialized to correct any corrupted data.</p>

            <h2>Corrective Actions</h2>
            <p>After the incident, the following actions were taken:</p>
            <ul>
                <li>Drives were reseated</li>
                <li>Drive bays were swapped</li>
                <li>Pool scrub was initialized</li>
            </ul>

        </div>
    </div>
</body>

</html>